(function() {

    var previousScroll = 0;
    var scrolledDown = true;
    var breadcrumbs = jQuery('#breadcrumbs');
    var $mobileMenu = jQuery('#mobile-menu');
    var $window = jQuery(window);


    $window.one('scroll', function() {
        previousScroll = jQuery(this).scrollTop();
    });
    
    if($window.width() > 1200){
    
        $window.scroll(function() {

            var currentScroll = jQuery(this).scrollTop();
            if (currentScroll > 0) {
                if (!breadcrumbs.hasClass('scrolled')) {
                    breadcrumbs.addClass('scrolled');
                }
            } else {
                breadcrumbs.removeClass('scrolled');
            }

            if (currentScroll > previousScroll) {
                if (!scrolledDown || previousScroll === 0) {
                    jQuery('#header-outer').addClass('small-nav');
                    scrolledDown = true;

                    if (jQuery('#mobile-menu').hasClass('open')) {
                        jQuery('#toggle-nav').trigger('click');
                    }
                }
            } else {
                if (scrolledDown) {
                    jQuery('#header-outer').removeClass('small-nav');
                    scrolledDown = false;
                }

            }
            previousScroll = currentScroll < 0 ? 0 : currentScroll;
        });
    }else{
        $mobileMenu.css("height", $window.height()-90);
    }

    $window.on('resize', function() {
        var $mobileMenu = jQuery('#mobile-menu');
        var $headerOuter = jQuery('#header-outer');
        var $breadCrumbs = jQuery('#breadcrumbs');

        if ($breadCrumbs.length > 0) {
            $mobileMenu.css('margin-top', $headerOuter.outerHeight() + $breadCrumbs.outerHeight());
        }
        
        
    });
    
    jQuery(document).ready(function() {
        jQuery('#toggle-nav').on('click', function() {
            var $mobileMenu = jQuery('#mobile-menu');
            var $headerOuter = jQuery('#header-outer');
            var $breadCrumbs = jQuery('#breadcrumbs');

            if ($breadCrumbs.length > 0) {
                $mobileMenu.css('margin-top', $headerOuter.outerHeight() + $breadCrumbs.outerHeight());
            }
            $mobileMenu.toggleClass('open');

            if($window.width() < 1200){
                $mobileMenu.css("height", $window.height()-90);
            }
        });
    });

}());
