(function($){$(document).ready(function(){$(document).on('click','button.sharing-button',function(e){if(navigator.share!==undefined&&$(window).width()<769){navigator.share({text:$(this).attr('data-title'),title:$(this).attr('data-title'),url:$(this).attr('data-url')}).then(()=>console.log('Successfuly shared'));e.preventDefault();dataLayer.push({'event':'socialInteraction','socialNetwork':'Native sharing','socialAction':$(this).attr('data-action'),'socialTarget':$(this).attr('data-slug'),})}else{e.preventDefault();$('#social-modal .trck-social').attr('data-action',$(this).attr('data-action'));$('#social-modal .trck-social').attr('data-related',$(this).attr('data-related'));$('#social-modal .trck-social').attr('data-url',$(this).attr('data-url'));$('#social-modal .trck-social').attr('data-media',$(this).attr('data-media'));$('#social-modal .trck-social').attr('data-title',encodeURIComponent($(this).attr('data-title')));$('#social-modal .trck-social').attr('data-slug',$(this).attr('data-slug'));$('#social-modal input[name="cc-link"]').val($(this).attr('data-url'));$('#social-modal button.cc-link').text('Copier');bdmModalDisplay(!0,$('#social-modal'))}})});width=700;height=500;if(window.innerWidth){var left=(window.innerWidth-width)/2;var top=(window.innerHeight-height)/2}else{var left=(document.body.clientWidth-width)/2;var top=(document.body.clientHeight-height)/2}
function datalayerPush(elem,network){dataLayer.push({'event':'socialInteraction','socialNetwork':network,'socialAction':elem.closest('.trck-social').attr('data-action'),'socialTarget':elem.closest('.trck-social').attr('data-slug'),})}
$(document).on('click','.trck-social a',function(event){event.preventDefault();console.log($(this).closest('.trck-social').attr('data-title'));console.log($('#social-modal .trck-social').attr('data-title'))});$(document).on('click','.fb-link',function(event){event.preventDefault();var current_url=$(this).closest('.trck-social').attr('data-url');var current_title=$(this).closest('.trck-social').attr('data-title');var url_fb="http://www.facebook.com/sharer.php?u="+current_url+"&t="+current_title;window.open(url_fb,'Partager sur facebook','menubar=no,scrollbars=no,top='+top+',left='+left+',width='+width+',height='+height);datalayerPush($(this),'Facebook')});$(document).on('click','.tw-link',function(event){event.preventDefault();var current_url=$(this).closest('.trck-social').attr('data-url');var current_title=$(this).closest('.trck-social').attr('data-title');var related=$(this).closest('.trck-social').attr('data-related');var username="BlogModerateur";current_title=current_title.replace(" - BDM","");var longueur=current_title.length;longueur=longueur+24+3+4;longueur=longueur+username.length;if(longueur>=280){var end_points=!1;do{longueur=current_title.length;longueur=longueur+ +24+3+4;longueur=longueur+username.length;if(longueur>277){dernier_mot=current_title.substring(current_title.lastIndexOf(" ")+1,current_title.length);current_title=current_title.substring(0,current_title.length-dernier_mot.length);current_title=current_title.substring(0,current_title.length-1);end_points=!0}}while(longueur>277);if(end_points){current_title+="..."}}
var url_tw="https://twitter.com/share?url="+current_url+"&related="+related+"&via="+username+"&text="+current_title;window.open(url_tw,'Partager sur Twitter','menubar=no,scrollbars=no,top='+top+',left='+left+',width='+width+',height='+height);datalayerPush($(this),'Twitter')});$(document).on('click','.ld-link',function(event){event.preventDefault();var current_url=$(this).closest('.trck-social').attr('data-url');var url_ld="https://www.linkedin.com/shareArticle?source="+document.location.origin+"&mini=true&url="+current_url;window.open(url_ld,'Partager sur Linkedin','menubar=no,scrollbars=no,top='+top+',left='+left+',width='+width+',height='+height);datalayerPush($(this),'Linkedin')});$(document).on('click','.pt-link',function(event){event.preventDefault();var current_url=$(this).closest('.trck-social').attr('data-url');var current_title=$(this).closest('.trck-social').attr('data-title');var current_media=$(this).closest('.trck-social').attr('data-media');var url_pt="https://pinterest.com/pin/create/button/?url="+current_url+"&media="+current_media+"&description="+current_title;window.open(url_pt,'Partager sur Pinterest','menubar=no,scrollbars=no,top='+top+',left='+left+',width='+width+',height='+height);datalayerPush($(this),'Pinterest')})
$(document).on('click','.reddit-link',function(event){event.preventDefault();var current_url=$(this).closest('.trck-social').attr('data-url');var current_title=$(this).closest('.trck-social').attr('data-title');var url_reddit="https://reddit.com/submit/?url="+current_url+"&resubmit=true&title="+current_title;window.open(url_reddit,'Partager sur Reddit','menubar=no,scrollbars=no,top='+top+',left='+left+',width='+width+',height='+height);datalayerPush($(this),'Reddit')})
$(document).on('click','.flipboard-link',function(event){event.preventDefault();var current_url=$(this).closest('.trck-social').attr('data-url');var current_title=$(this).closest('.trck-social').attr('data-title');var url_reddit="https://share.flipboard.com/bookmarklet/popout?v=2&url="+current_url+"&title="+current_title;window.open(url_reddit,'Partager sur Flipboard','menubar=no,scrollbars=no,top='+top+',left='+left+',width='+width+',height='+height);datalayerPush($(this),'Flipboard')})
$(document).on('click','.mail-link',function(event){event.preventDefault();var current_url=$(this).closest('.trck-social').attr('data-url');var current_title=$(this).closest('.trck-social').attr('data-title');var url_email="mailto:?subject="+current_title+"&body="+current_title+" "+current_url;window.open(url_email);datalayerPush($(this),'Email')})
$(document).on('click','.cc-link',function(event){event.preventDefault();var dummy=document.createElement('input');var text=$(this).closest('.trck-social').attr('data-url');document.body.appendChild(dummy);dummy.value=text;dummy.select();document.execCommand('copy');document.body.removeChild(dummy);$(this).text('Url copi√©e');datalayerPush($(this),'CopyPast')})})(jQuery)